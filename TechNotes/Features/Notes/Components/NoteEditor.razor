@page "/note-editor"


@inject ISender Sender


<PageTitle>Crear nota</PageTitle>

<h3>Crear nota</h3>


<EditForm Model="Note" OnSubmit="HandleSubmit" FormName="NoteEditorForm">
  <InputText @bind-Value="Note.Title" placeholder="Título" class="form-control mb-2" />
  <InputTextArea @bind-Value="Note.Content" placeholder="Nota" class="form-control mb-2" rows="5" />
  <label>Fecha de publicación</label>
  <InputDate @bind-Value="Note.PublishedAt" class="form-control mb-2"/>
  <label class="form-check-label mb-2">Publicado:</label>
  <InputCheckbox @bind-Value="Note.IsPublished" class="form-check-input mb-2" />

  <button class="btn btn-success mt-3 w-100" type="submit">Crear</button>
</EditForm>

<a href="/notes" class="btn btn-outline-primary mt-3">Volver</a>


@code {
  [SupplyParameterFromForm]
  private NoteModel Note {get; set;} = new NoteModel();
  private async Task HandleSubmit()
  {
    var command = Note.Adapt<CreateNoteCommand>();
    var result = await Sender.Send(command);
    Note = result.Adapt<NoteModel>();
    Console.WriteLine("Nota creada exitosamente!");
  }
}
